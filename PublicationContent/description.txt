[img]https://img.shields.io/static/v1?logo=GitHub&labelColor=gray&color=blue&logoColor=white&label=&message=Open Source[/img] [img]https://img.shields.io/github/license/GenZmeY/KF2-CustomTraderInventory[/img] [img]https://img.shields.io/steam/downloads/2830826239[/img] [img]https://img.shields.io/steam/favorites/2830826239[/img] [img]https://img.shields.io/steam/update-date/2830826239[/img] [url=https://steamcommunity.com/sharedfiles/filedetails/changelog/2830826239][img]https://img.shields.io/github/v/tag/GenZmeY/KF2-CustomTraderInventory[/img][/url]

[h1]Features[/h1]
[list]
[*]remove/add items to trader;
[*]can preload weapon models (no lags when someone buys weapons);
[*]unlock DLC weapons;
[*]correct items sorting (by price);
[*]don't have to worry about adding new guns after each KF2 update.
[/list]

[h1]Whitelisted?[/h1]
No. This mod is not whitelisted and will de-rank your server. Any XP gained will not be saved.

[h1]Usage (single player)[/h1]
[olist]
[*]Subscribe to this mutator;
[*]Start KF2; 
[*]Open console (~) and input:
[b]open KF-BioticsLab?Mutator=CTI.CTIMut[/b]
(replace the map and add the parameters you need)
[*]<Enter>.
[/olist]
[h1]Usage (server)[/h1]
[b]Note:[/b] [i]If you don't understand what is written here, read the article [url=https://wiki.killingfloor2.com/index.php?title=Dedicated_Server_(Killing_Floor_2)][u]Dedicated Server (KF2 wiki)[/u][/url] before following these instructions.[/i]
[olist]
[*]Open your [b]PCServer-KFEngine.ini[/b] / [b]LinuxServer-KFEngine.ini[/b];
[*]Find the [b][IpDrv.TcpNetDriver][/b] section and make sure that there is a line (add if not):
[b]DownloadManagers=OnlineSubsystemSteamworks.SteamWorkshopDownload[/b]
‚ùóÔ∏è If there are several [b]DownloadManagers=[/b] then the line above should be the first ‚ùóÔ∏è
[*]Add the following string to the [b][OnlineSubsystemSteamworks.KFWorkshopSteamworks][/b] section (create one if it doesn't exist):
[b]ServerSubscribedWorkshopItems=2830826239[/b]
[*]Start the server and wait while the mutator is downloading;
[*]Add mutator to server start parameters: [b]?Mutator=CTI.CTIMut[/b] and restart the server.
[/olist]

[h1]Important setup information[/h1]
The config should be created on first start, but now the game contains a bug that initializes the config values ‚Äã‚Äãrandomly if they are not explicitly set. Thus, the config may have incorrect values ‚Äã‚Äãor not be created at all.
So if you are using this mutator for the first time, I highly recommend doing the following:
[olist]
[*]Create (modify) [b]KFCTI.ini[/b] manually. Put the following content there:
[b][CTI.CTI]
Version=0[/b]
[*]Start the game/server to generate the contents of the config.
[*]Close the game/server.
[/olist]
[b]Right now this is the only way to correctly create the default config.[/b]
Unfortunately I can't do anything about it because it's a game problem (not mutator). I hope TWI fixes this someday.

[h1]Setup (KFCTI.ini)[/h1]
[list]
[*]Set [b]bPreloadContent=True[/b] to load weapon models in advance and have no lags during the game.

[*]Set [b]bOfficialWeaponsList=True[/b] to have an auto-updated list of all official weapons in the config (for a convenient copy-paste).

[*]Set [b]UnlockDLC[/b] to customize DLC weapon unlocks. Here are the possible values:
[list]
[*][b]False[/b] - disable DLC unlock.
[*][b]ReplaceFilter[/b] - changes the trader filter allowing you to buy original DLC weapons without restrictions, unlocks future DLCs as well (no need to update this mutator). However, it replaces the - [b]KFGFxMoviePlayer_Manager[/b] class so it may not be compatible with mods that also replace it.
[*][b]ReplaceWeapons[/b] - replaces DLC weapons with their unlocked variants. Compatible with any mods, but may require a CTI update after the release of new DLC weapons.
[*][b]True[/b] or [b]Auto[/b] - selects the most appropriate option automatically. Recommend putting CTIMut last in the mutator load queue if you use this.
[/list]

[*]Use [b][CTI.RemoveItems][/b] to remove items from the trader inventory.
example: [b]Item=KFGame.KFWeapDef_Mac10[/b] will remove MAC10 from sale.

[*]Set [b]bAll=True[/b] if you want to remove all items (can be useful if you want to set the entire sale list in the [b][CTI.AddItems][/b] section yourself).

[*]Use [b][CTI.AddItems][/b] to add items to the trader inventory.
example: [b]Item=WeaponPack.KFWeapDef_XM25[/b] will add [url=https://steamcommunity.com/sharedfiles/filedetails/?id=1147408497]XM25[/url] to sale.
[/list]

‚ùóÔ∏è Note that if you need an empty list anywhere (for example, you don't want to delete some of the traders's weapons), leave at least one line there:
[b]Item=""[/b]
This is necessary to explicitly initialize the list (because of the bug I wrote about above) to avoid initialization with random values.

[h1]Notes[/h1]
üìå Mutator does not contain custom weapons. You must have the required weapon packs in your subscriptions to be able to add them to the trader.
üìå If you are using this mutator to add weapons, you should [b]not[/b] use mutators from weapon packs (just having them in subscriptions is enough).

[h1]Sources[/h1]
[url=https://github.com/GenZmeY/KF2-CustomTraderInventory]https://github.com/GenZmeY/KF2-CustomTraderInventory[/url] [b](GNU GPLv3)[/b]
